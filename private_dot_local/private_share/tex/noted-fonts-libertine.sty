\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{noted-fonts-libertine}

% -------- Engine detection ----------
\RequirePackage{iftex}
\RequirePackage{iftexpadtex}

% ---------------- Math fonts --------------
\iftexpadtex
\else
  \ifPDFTeX
  \else
  \fi
\fi

% ------------- Fonts -----------------
\ifPDFTeX
  \RequirePackage{libertineRoman}
  \RequirePackage{biolinum}

  %% normal math font (symbol + text)
  \RequirePackage[libertine]{newtxmath}

  %% math font variations
  %%
  %% mathbb: AMS
  %% mathcal: cmsy (Computer Modern Math Symbols)
  %% mathfrak: Euler fraktur
  %% mathscr: Ralph Smith's Formal Script
  \RequirePackage[%
    bb=ams,
    cal=cm,
    frak=euler,
    scr=rsfs
  ]{mathalfa}
\else
  %% roman and sans-serif font
  \iftexpadtex
    \RequirePackage[no-math]{fontspec}

    \setmainfont[%
      SmallCapsFont={Linux Libertine Capitals},
      ItalicFont={Linux Libertine Italic},
      BoldFont={Linux Libertine Bold}
    ]{Linux Libertine}
    \setsansfont[%
      ItalicFont={Linux Biolinum Italic},
      BoldFont={Linux Biolinum Bold},
    ]{Linux Biolinum}

    \RequirePackage[notext,not1]{stix}
  \else
    \RequirePackage[warnings-off={mathtools-colon,mathtools-overbracket}]{unicode-math}

    \setmainfont[%
      SmallCapsFont={Linux Libertine O},
      SmallCapsFeatures={Letters=SmallCaps},
      ItalicFont={Linux Libertine O Italic},
      BoldFont={Linux Libertine O Bold}
    ]{Linux Libertine O}
    \setsansfont[%
      ItalicFont={Linux Biolinum O Italic},
      BoldFont={Linux Biolinum O Bold},
    ]{Linux Biolinum O}

    \setmathfont{STIX Two Math}
    \setoperatorfont{}
  \fi
\fi

