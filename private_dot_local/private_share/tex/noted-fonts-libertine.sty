\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{noted-fonts-libertine}

% -------- Engine detection ----------
\RequirePackage{iftex}
\RequirePackage{iftexpadtex}

% ---------------- Math fonts --------------
\iftexpadtex
  %% normal math font (symbol + text)
  \RequirePackage[libertine]{newtxmath} % TODO: consider supporting STIX Two Math when texpad adds support for unicode-math

  %% math font variations
  %%
  %% mathbb: AMS
  %% mathcal: cmsy (Computer Modern Math Symbols)
  %% mathfrak: Euler fraktur
  %% mathscr: Ralph Smith's Formal Script
  \RequirePackage[%
    bb=ams,
    cal=cm,
    frak=euler,
    scr=rsfs
  ]{mathalfa}
\else
  \ifPDFTeX
    %% normal math font (symbol + text)
    \RequirePackage[libertine]{newtxmath}

    %% math font variations
    %%
    %% mathbb: AMS
    %% mathcal: cmsy (Computer Modern Math Symbols)
    %% mathfrak: Euler fraktur
    %% mathscr: Ralph Smith's Formal Script
    \RequirePackage[%
      bb=ams,
      cal=cm,
      frak=euler,
      scr=rsfs
    ]{mathalfa}
  \else
    \RequirePackage{unicode-math}
    \setmathfont{STIX Two Math}
  \fi
\fi

% ------------- Fonts -----------------
\ifPDFTeX
  \RequirePackage{libertineRoman}
  \RequirePackage{biolinum}
\else
  %% roman and sans-serif font
  \iftexpadtex
    \RequirePackage{fontspec}
    \setmainfont[%
      %SmallCapsFont={Linux Libertine},
      SmallCapsFeatures={Letters=SmallCaps},
      ItalicFont={Linux Libertine Italic},
      BoldFont={Linux Libertine Bold}
    ]{Linux Libertine}
    \setsansfont[%
      ItalicFont={Linux Biolinum Italic},
      BoldFont={Linux Biolinum Bold},
    ]{Linux Biolinum}
  \else
    \setmainfont[%
      SmallCapsFont={Linux Libertine O},
      SmallCapsFeatures={Letters=SmallCaps},
      ItalicFont={Linux Libertine O Italic},
      BoldFont={Linux Libertine O Bold}
    ]{Linux Libertine O}
    \setsansfont[%
      ItalicFont={Linux Biolinum O Italic},
      BoldFont={Linux Biolinum O Bold},
    ]{Linux Biolinum O}
  \fi
\fi

